<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mind Map</title>

  <!-- prevents favicon.ico 404 -->
  <link rel="icon" href="data:,">

  <style>
    html, body { height: 100%; margin: 0; }
    body { display: flex; flex-direction: column; }

    .topbar {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding: 10px 14px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      background: white;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .hint { color: #6b7280; font-size: 13px; }
    .wrap { flex: 1; min-height: 0; }
    svg { width: 100%; height: 100%; }

    .btn {
      font-size: 13px;
      padding: 6px 10px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn:hover { background: #f3f4f6; }

    #error {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding: 10px 14px;
      color: #b91c1c;
      display: none;
      border-bottom: 1px solid #fee2e2;
      background: #fff1f2;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div>
      <strong>Mind Map</strong>
      <div class="hint">Scroll to zoom • drag to pan • click links to open</div>
    </div>
    <button class="btn" id="resetBtn" type="button">Reset view</button>
  </div>

  <div id="error"></div>

  <div class="wrap">
    <svg id="mindmap"></svg>
  </div>

  <!-- ✅ Edit your mind map here -->
  <pre id="mm" hidden>
# My Hub
- [GitHub](https://github.com)
  - [My Repos](https://github.com/Vamshi619?tab=repositories)
  - [Stars](https://github.com/stars)
- Learning
  - [LangChain](https://python.langchain.com/)
  - [FastAPI](https://fastapi.tiangolo.com/)
- Work
  - [VAMSHI_NOTES](https://github.com/Vamshi619/VAMSHI_NOTES)
  </pre>

  <!-- ✅ IMPORTANT: use markmap-lib + d3 + markmap-view (NOT markmap-autoloader) -->
  <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.18.12/dist/browser/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script>

  <script>
    (function () {
      const showError = (msg) => {
        const el = document.getElementById('error');
        el.style.display = 'block';
        el.textContent = msg;
      };

      window.addEventListener('load', async () => {
        try {
          if (!window.markmap) {
            showError("markmap failed to load (CDN blocked?). Try different network or disable adblock.");
            return;
          }

          const markdown = document.getElementById('mm').textContent.trim();

          const { Markmap, Transformer, loadCSS, loadJS } = window.markmap;

          const transformer = new Transformer();
          const { root, features } = transformer.transform(markdown);
          const { styles, scripts } = transformer.getUsedAssets(features);

          if (styles) loadCSS(styles);
          if (scripts) await loadJS(scripts, { getMarkmap: () => window.markmap });

          const mm = Markmap.create('#mindmap', null, root);
          mm.fit();

          document.getElementById('resetBtn').addEventListener('click', () => mm.fit());

          // Open node links in a new tab
          const svg = document.getElementById('mindmap');
          svg.addEventListener('click', (e) => {
            const a = e.target.closest('a');
            if (!a) return;
            const url = a.getAttribute('href') || a.getAttribute('xlink:href');
            if (!url) return;
            e.preventDefault();
            window.open(url, '_blank', 'noopener,noreferrer');
          });

        } catch (err) {
          showError("Error rendering mind map: " + (err?.message || String(err)));
          console.error(err);
        }
      });
    })();
  </script>
</body>
</html>
