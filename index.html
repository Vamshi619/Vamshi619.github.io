<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mind Map</title>
  <style>
    html, body { height: 100%; margin: 0; }
    body { display: flex; flex-direction: column; }

    .topbar {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding: 10px 14px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      background: white;
      z-index: 10;
    }

    .hint { color: #6b7280; font-size: 13px; }
    .wrap { flex: 1; min-height: 0; }
    svg { width: 100%; height: 100%; }

    .btn {
      font-size: 13px;
      padding: 6px 10px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn:hover { background: #f3f4f6; }

    #error {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding: 10px 14px;
      color: #b91c1c;
      display: none;
      border-bottom: 1px solid #fee2e2;
      background: #fff1f2;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div>
      <strong>Mind Map</strong>
      <div class="hint">Scroll to zoom • drag to pan • click links to open</div>
    </div>
    <button class="btn" id="resetBtn" type="button">Reset view</button>
  </div>

  <div id="error"></div>

  <div class="wrap">
    <svg id="mindmap"></svg>
  </div>

  <!-- ✅ Edit your nodes here (Markdown). Links become clickable nodes. -->
  <script type="text/template" id="mm">
# My Hub
- [GitHub](https://github.com)
  - [My Repos](https://github.com/Vamshi619?tab=repositories)
  - [Stars](https://github.com/stars)
- Learning
  - [LangChain](https://python.langchain.com/)
  - [FastAPI](https://fastapi.tiangolo.com/)
- Work
  - [VAMSHI_NOTES](https://github.com/Vamshi619/VAMSHI_NOTES)
  </script>

  <!-- Markmap (loads and renders the Markdown above into a zoomable SVG mindmap) -->
  <script src="https://cdn.jsdelivr.net/npm/markmap-autoloader@0.16.1"></script>

  <script>
    (function () {
      const showError = (msg) => {
        const el = document.getElementById('error');
        el.style.display = 'block';
        el.textContent = msg;
      };

      window.addEventListener('load', () => {
        try {
          if (!window.markmap) {
            showError("Markmap failed to load. Possibly blocked network/CDN. Try disabling adblock or changing network.");
            return;
          }

          const { markmap } = window;
          const svg = document.getElementById('mindmap');
          const md = document.getElementById('mm').textContent.trim();

          // ✅ FIX: Transformer must be instantiated
          const transformer = new markmap.Transformer();
          const { root } = transformer.transform(md);

          const mm = markmap.Markmap.create(svg, {
            autoFit: true,
            duration: 250,
            zoom: true,
            pan: true
          }, root);

          // Fit on load
          mm.fit();

          // Reset button
          document.getElementById('resetBtn').addEventListener('click', () => mm.fit());

          // Open node links in a new tab
          svg.addEventListener('click', (e) => {
            const a = e.target.closest('a');
            if (!a) return;

            const url = a.getAttribute('href') || a.getAttribute('xlink:href');
            if (!url) return;

            e.preventDefault();
            window.open(url, '_blank', 'noopener,noreferrer');
          });

        } catch (err) {
          showError("Error rendering mind map: " + (err && err.message ? err.message : String(err)));
          console.error(err);
        }
      });
    })();
  </script>
</body>
</html>
